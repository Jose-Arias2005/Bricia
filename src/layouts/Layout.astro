---
import '../styles/global.css';
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Transportes Bricia | Ingeniería en Agua Potable</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  </head>
  
  <body class="bg-[#EBEBEB] text-slate-800 antialiased selection:bg-[#38BDF8] selection:text-white">
    <slot />
    
    <a 
      href="https://wa.me/51963751896?text=Hola,%20quisiera%20una%20cotización." 
      target="_blank" 
      class="fixed bottom-6 left-6 z-50 group flex items-center justify-center p-4 bg-[#25D366] hover:bg-[#20bd5a] text-white rounded-full shadow-[0_4px_20px_rgba(37,211,102,0.4)] transition-all hover:scale-110 border-2 border-white"
      aria-label="WhatsApp"
    >
      <svg class="w-8 h-8 fill-current" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
    </a>

    <button
      id="scrollTopBtn"
      class="fixed bottom-6 right-6 z-50 p-4 bg-[#10367D] hover:bg-[#38BDF8] text-white rounded-full shadow-[0_4px_20px_rgba(16,54,125,0.3)] transition-all duration-300 hover:scale-110 border-2 border-white opacity-0 translate-y-10 pointer-events-none"
      aria-label="Volver al inicio"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>
    
    <div class="fixed bottom-0 left-0 w-full h-10 z-40 pointer-events-none select-none drop-shadow-[0_0_10px_rgba(56,189,248,0.5)]">
      <div id="wave-progress" class="h-full relative overflow-hidden transition-[width] duration-100 ease-out" style="width: 0%;">
        <div class="absolute bottom-0 left-0 w-[100vw] h-full">
          <div class="absolute bottom-2 left-0 w-[200%] h-6"
               style="background: url('data:image/svg+xml;utf8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 1200 120%22 preserveAspectRatio=%22none%22%3E%3Cpath d=%22M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z%22 fill=%22%2338BDF8%22/%3E%3C/svg%3E') repeat-x; 
                      background-size: 50% 100%; 
                      transform: scaleY(-1);
                      animation: moveWave 6s linear infinite reverse;">
          </div>
          <div class="absolute bottom-0 left-0 w-full h-4 bg-[#38BDF8]"></div>
        </div>
      </div>
    </div>

    <style is:global>
      @keyframes moveWave {
        0% { transform: translateX(0) scaleY(-1); }
        100% { transform: translateX(-50%) scaleY(-1); }
      }
    </style>

    <script>
      // 1. Lógica de la Barra de Agua
      const waveProgress = document.getElementById('wave-progress');
      
      // 2. Lógica del Botón "Volver al inicio"
      const scrollTopBtn = document.getElementById('scrollTopBtn');

      // Al hacer click, sube suavemente
      scrollTopBtn?.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });

      // Evento Scroll unificado
      window.addEventListener('scroll', () => {
        const scrollTop = window.scrollY;
        const docHeight = document.documentElement.scrollHeight - window.innerHeight;
        const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;

        // Actualizar barra de agua
        if (waveProgress) {
          waveProgress.style.width = `${Math.min(scrollPercent, 100)}%`;
        }

        // Mostrar/Ocultar botón de subir
        // Se muestra si hemos bajado más de 300px
        if (scrollTopBtn) {
          if (scrollTop > 300) {
            scrollTopBtn.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
            scrollTopBtn.classList.add('opacity-100', 'translate-y-0', 'pointer-events-auto');
          } else {
            scrollTopBtn.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
            scrollTopBtn.classList.remove('opacity-100', 'translate-y-0', 'pointer-events-auto');
          }
        }
      });
    </script>

  </body>
</html>

<style is:global>
  /* APLICAMOS OUTFIT A TODO */
  body, h1, h2, h3, h4, h5, h6 {
    font-family: 'Outfit', sans-serif;
  }
</style>